{"version":3,"file":"index-Byx0BsDj.js","sources":["../../../app/administration/src/module/sw-extension-store/page/sw-extension-store-listing/sw-extension-store-listing.html.twig","../../../app/administration/src/module/sw-extension-store/page/sw-extension-store-listing/index.js"],"sourcesContent":["{% block sw_extension_store_listing %}\n    <div class=\"sw-extension-store-listing\">\n        {% block sw_extension_store_listing_loader %}\n            <sw-loader v-if=\"isLoading\" />\n        {% endblock %}\n\n        <sw-extension-store-accessibility />\n        <sw-extension-store-statistics-promotion />\n\n        {% block sw_extension_store_listing_filter %}\n            <sw-extension-store-listing-filter />\n        {% endblock %}\n\n        {% block sw_extension_store_listing_grid %}\n            <div class=\"sw-extension-store-listing__listing-grid\">\n                <template v-for=\"extension in extensions\" :key=\"extension.id\">\n                    {% block sw_extension_store_listing_card %}\n                        <sw-extension-listing-card :extension=\"extension\" />\n                    {% endblock %}\n                </template>\n            </div>\n        {% endblock %}\n\n        {% block sw_extension_store_listing_pagination %}\n            <sw-pagination v-bind=\"{ total, page, limit }\" @page-change=\"setPage\" />\n        {% endblock %}\n    </div>\n{% endblock %}\n","import template from './sw-extension-store-listing.html.twig';\nimport './sw-extension-store-listing.scss';\n\n/**\n * @private\n */\nexport default {\n    name: 'sw-extension-store-listing',\n    template,\n\n    inject: ['feature'],\n\n    emits: ['extension-listing-errors'],\n\n    mixins: ['sw-extension-error'],\n\n    data() {\n        return {\n            isLoading: false,\n        };\n    },\n\n    computed: {\n        extensions() {\n            return Shopware.Store.get('shopwareExtensions').extensionListing;\n        },\n\n        currentSearch() {\n            return Shopware.Store.get('shopwareExtensions').search;\n        },\n\n        page() {\n            return this.currentSearch.page;\n        },\n\n        limit() {\n            return this.currentSearch.limit;\n        },\n\n        total() {\n            return this.extensions.total || 0;\n        },\n\n        rating() {\n            return this.currentSearch.rating;\n        },\n\n        languageId() {\n            return Shopware.Store.get('session').languageId;\n        },\n\n        currentLocale() {\n            return Shopware.Store.get('session').currentLocale === 'de-DE' ? 'de' : 'en';\n        },\n    },\n\n    watch: {\n        currentSearch: {\n            deep: true,\n            immediate: true,\n            handler() {\n                this.getList();\n            },\n        },\n        languageId(newValue) {\n            if (newValue !== '') {\n                this.getList();\n            }\n        },\n    },\n\n    methods: {\n        async getList() {\n            this.isLoading = true;\n\n            if (this.languageId === '') {\n                return;\n            }\n\n            try {\n                await this.search();\n            } catch (e) {\n                this.showExtensionErrors(e);\n                this.$emit('extension-listing-errors', e);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async search() {\n            const extensionDataService = Shopware.Service('extensionStoreDataService');\n\n            const page = await extensionDataService.getExtensionList(\n                Shopware.Store.get('shopwareExtensions').search,\n                { ...Shopware.Context.api, languageId: Shopware.Store.get('session').languageId },\n            );\n\n            Shopware.Store.get('shopwareExtensions').extensionListing = page;\n        },\n\n        setPage({ limit, page }) {\n            Shopware.Store.get('shopwareExtensions').setSearchValue({ key: 'limit', value: limit });\n            Shopware.Store.get('shopwareExtensions').setSearchValue({ key: 'page', value: page });\n        },\n    },\n};\n"],"names":["template","index","newValue","page","limit"],"mappings":"AAAA,MAAAA,EAAe,szBCMfC,EAAe,CACX,KAAM,6BACN,SAAAD,EAEA,OAAQ,CAAC,SAAS,EAElB,MAAO,CAAC,0BAA0B,EAElC,OAAQ,CAAC,oBAAoB,EAE7B,MAAO,CACH,MAAO,CACH,UAAW,EACvB,CACA,EAEI,SAAU,CACN,YAAa,CACT,OAAO,SAAS,MAAM,IAAI,oBAAoB,EAAE,gBAC5D,EAEQ,eAAgB,CACZ,OAAO,SAAS,MAAM,IAAI,oBAAoB,EAAE,MAC5D,EAEQ,MAAO,CACH,OAAO,KAAK,cAAc,IACtC,EAEQ,OAAQ,CACJ,OAAO,KAAK,cAAc,KACtC,EAEQ,OAAQ,CACJ,OAAO,KAAK,WAAW,OAAS,CAC5C,EAEQ,QAAS,CACL,OAAO,KAAK,cAAc,MACtC,EAEQ,YAAa,CACT,OAAO,SAAS,MAAM,IAAI,SAAS,EAAE,UACjD,EAEQ,eAAgB,CACZ,OAAO,SAAS,MAAM,IAAI,SAAS,EAAE,gBAAkB,QAAU,KAAO,IACpF,CACA,EAEI,MAAO,CACH,cAAe,CACX,KAAM,GACN,UAAW,GACX,SAAU,CACN,KAAK,QAAO,CAC5B,CACA,EACQ,WAAWE,EAAU,CACbA,IAAa,IACb,KAAK,QAAO,CAE5B,CACA,EAEI,QAAS,CACL,MAAM,SAAU,CAGZ,GAFA,KAAK,UAAY,GAEb,KAAK,aAAe,GAIxB,GAAI,CACA,MAAM,KAAK,OAAM,CACjC,OAAqB,EAAG,CACR,KAAK,oBAAoB,CAAC,EAC1B,KAAK,MAAM,2BAA4B,CAAC,CACxD,QAAa,CACG,KAAK,UAAY,EACjC,CACA,EAEQ,MAAM,QAAS,CAGX,MAAMC,EAAO,MAFgB,SAAS,QAAQ,2BAA2B,EAEjC,iBACpC,SAAS,MAAM,IAAI,oBAAoB,EAAE,OACzC,CAAE,GAAG,SAAS,QAAQ,IAAK,WAAY,SAAS,MAAM,IAAI,SAAS,EAAE,UAAU,CAC/F,EAEY,SAAS,MAAM,IAAI,oBAAoB,EAAE,iBAAmBA,CACxE,EAEQ,QAAQ,CAAE,MAAAC,EAAO,KAAAD,GAAQ,CACrB,SAAS,MAAM,IAAI,oBAAoB,EAAE,eAAe,CAAE,IAAK,QAAS,MAAOC,EAAO,EACtF,SAAS,MAAM,IAAI,oBAAoB,EAAE,eAAe,CAAE,IAAK,OAAQ,MAAOD,EAAM,CAChG,CACA,CACA"}