{"version":3,"file":"index-BLyiNZgQ.js","sources":["../../../app/administration/src/module/sw-extension-store/page/sw-extension-store-detail/sw-extension-store-detail.html.twig","../../../app/administration/src/module/sw-extension-store/page/sw-extension-store-detail/index.js"],"sourcesContent":["{% block sw_extension_store_detail %}\n    <sw-meteor-page\n        v-if=\"fetchError\"\n        :hide-icon=\"true\"\n        class=\"sw-extension-store-detail\"\n    >\n        <div class=\"sw-extension-store-detail__extension-unknown\">\n            <sw-label\n                appearance=\"pill\"\n                variant=\"danger\"\n            >\n                <mt-icon\n                    name=\"regular-times-circle\"\n                    size=\"30px\"\n                />\n            </sw-label>\n            <h2>{{ fetchError.title }}</h2>\n            <p>{{ fetchError.detail }}</p>\n        </div>\n    </sw-meteor-page>\n\n    <sw-meteor-page\n        v-else-if=\"suspended || isLoading\"\n        :hide-icon=\"suspended\"\n        class=\"sw-extension-store-detail\"\n    >\n        {% block sw_extension_store_detail_loader %}<sw-loader />{% endblock %}\n    </sw-meteor-page>\n\n    <sw-meteor-page\n        v-else\n        :class=\"variantClass\"\n        class=\"sw-extension-store-detail\"\n    >\n        {% block sw_extension_store_detail_smart_bar %}\n            {% block sw_extension_store_detail_slot_icon %}\n                <template #smart-bar-icon>\n                    {% block sw_extension_store_detail_icon %}\n                        <sw-extension-icon\n                            class=\"sw-extension-store-detail__extension-icon\"\n                            :src=\"extension.icon\"\n                        />\n                    {% endblock %}\n                </template>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_slot_smart_bar_header %}\n                <template #smart-bar-header>\n                    {% block sw_extension_store_detail_smart_bar_title %}\n                        {{ extension.label }}\n                    {% endblock %}\n                </template>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_slot_smart_bar_header_meta %}\n                <template #smart-bar-header-meta>\n                    {% block sw_extension_store_detail_smart_bar_producer_name %}\n                        <span v-if=\"extension.producerWebsite && extension.producerName\">\n                            {{ $t('sw-extension-store.detail.labelBy') }}\n\n                            <sw-external-link\n                                small\n                                :href=\"extension.producerWebsite\"\n                                class=\"link sw-extension-store-detail__producer-link\"\n                            >\n                                {{ extension.producerName }}\n                            </sw-external-link>\n                        </span>\n\n                        <span v-else-if=\"extension.producerName\">\n                            {{ $t('sw-extension-store.detail.labelBy') }} {{ extension.producerName }}\n                        </span>\n                    {% endblock %}\n\n                    {% block sw_extension_store_detail_slot_smart_bar_header_meta_extension_type_label %}\n                        <sw-extension-type-label\n                            :type=\"extension.type\"\n                            class=\"sw-extension-store-detail__extension-type-label\"\n                        />\n                    {% endblock %}\n                </template>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_slot_smart_bar_description %}\n                <template #smart-bar-description>\n                    {% block sw_extension_store_detail_smart_bar_description %}\n                        {% block sw_extension_store_detail_label_and_rating_overview %}\n                            <div class=\"sw-extension-store-detail__label-and-rating-overview\">\n\n                                {% block sw_extension_store_detail_rating_overview %}\n                                    <div class=\"sw-extension-store-detail__rating-overview\">\n                                        {% block sw_extension_store_detail_rating_overview_content %}\n                                            <template v-if=\"extension.numberOfRatings > 0\">\n                                                {% block sw_extension_store_detail_rating_overview_ratings %}\n                                                    <sw-extension-rating-stars\n                                                        :rating=\"extension.rating\"\n                                                        :size=\"12\"\n                                                    />\n\n                                                    <router-link\n                                                        class=\"sw-extension-store-detail__number-of-reviews\"\n                                                        :to=\"{ name: 'sw.extension.store.detail', params: { id: id }, hash: '#ratings-card'}\"\n                                                    >\n                                                        {{ $t('sw-extension-store.detail.numberOfRatings', extension.numberOfRatings) }}\n                                                    </router-link>\n                                                {% endblock %}\n\n                                                {% block sw_extension_store_detail_label_display %}\n                                                    <sw-extension-store-label-display\n                                                        v-if=\"extension.labels.length > 0\"\n                                                        :labels=\"extension.labels\"\n                                                        class=\"sw-extension-store-detail__label-display\"\n                                                    />\n                                                {% endblock %}\n                                            </template>\n\n                                            <template v-else>\n                                                {% block sw_extension_store_detail_rating_overview_no_ratings %}\n                                                    <mt-icon\n                                                        name=\"solid-star\"\n                                                        size=\"12px\"\n                                                    />\n\n                                                    <span class=\"sw-extension-store-detail__no-ratings-text\">{{ $t('sw-extension-store.detail.noRatings') }}</span>\n                                                {% endblock %}\n                                            </template>\n                                        {% endblock %}\n                                    </div>\n                                {% endblock %}\n                            </div>\n                        {% endblock %}\n                    {% endblock %}\n                </template>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_slot_smart_bar_actions %}\n                <template #smart-bar-actions>\n                    {% block sw_extension_store_detail_smart_bar_actions %}\n                        <template v-if=\"isPurchasable\">\n                            {% block sw_extension_store_detail_smart_bar_actions_add %}\n                                {% block sw_extension_store_detail_smart_bar_actions_add_button %}\n                                    <mt-button\n                                        variant=\"primary\"\n                                        class=\"sw-extension-store-detail__action-add-extension\"\n                                        @click=\"onClickAddExtension\"\n                                    >\n                                        <template v-if=\"extension && extension.isTheme\">\n                                            {{ $t('sw-extension-store.detail.labelButtonAddTheme') }}\n                                        </template>\n                                        <template v-else>\n                                            {{ $t('sw-extension-store.detail.labelButtonAddExtension') }}\n                                        </template>\n                                    </mt-button>\n                                {% endblock %}\n\n                                {% block sw_extension_store_detail_smart_bar_price %}\n                                    <template v-if=\"recommendedVariant && recommendedVariant.netPrice == 0\">\n                                        <span class=\"sw-extension-store-detail__price-free\">\n                                            {{ $t('sw-extension-store.general.labelFree') }}\n                                        </span>\n                                    </template>\n                                    <span\n                                        v-else-if=\"recommendedVariant\"\n                                        :class=\"discountClass\"\n                                    >\n                                        <span class=\"sw-extension-store-detail__net-price\">\n                                            {{ renderPrice(recommendedVariant.netPrice) }}\n                                        </span>\n                                        <span\n                                            v-if=\"recommendedVariant.netPrice !== discountedPrice\"\n                                            class=\"sw-extension-store-detail__discounted-price\"\n                                        >\n                                            {{ renderPrice(discountedPrice) }}\n                                        </span>\n                                        <span\n                                            v-if=\"shopwareExtensionService.mapVariantToRecommendation(recommendedVariant) === 1\"\n                                            class=\"sw-extension-store-detail__rent-suffix\"\n                                        >\n                                            {{ $t('sw-extension-store.general.labelRentSuffix') }}\n                                        </span>\n                                    </span>\n                                {% endblock %}\n\n                                {% block sw_extension_store_detail_smart_bar_discounted_price_info %}\n                                    <small\n                                        v-if=\"hasActiveDiscount\"\n                                        class=\"sw-extension-store-detail__discounted-price-info\"\n                                    >\n                                        <template v-if=\"!!discountAppliesForMonths\">\n                                            {{ $t('sw-extension-store.detail.labelDiscountPeriod', { months: discountAppliesForMonths }, discountAppliesForMonths) }}\n                                        </template>\n\n                                        {{ $t('sw-extension-store.detail.labelDiscountInfo', { endDate: dateFilter(recommendedVariant.discountCampaign.endDate) }) }}\n                                    </small>\n                                {% endblock %}\n\n                                {% block sw_extension_store_detail_smart_bar_actions_trial_info %}\n                                    <mt-button\n                                        v-if=\"recommendedVariant && recommendedVariant.trialPhaseIncluded\"\n                                        class=\"sw-extension-store-detail__trial-info\"\n                                        variant=\"secondary\"\n                                        @click=\"onClickAddExtension\"\n                                    >\n                                        {{ $t('sw-extension-store.detail.hasTrialPhase') }}\n                                    </mt-button>\n                                {% endblock %}\n\n                                {% block sw_extension_store_detail_smart_bar_in_app_purchases_badge %}\n                                    <span v-if=\"extension.inAppFeaturesAvailable\" class=\"sw-extension-store-detail__in-app-purchases__badge\">\n                                        {{ $t('sw-extension.in-app-purchase.badge-label') }}\n                                    </span>\n                                {% endblock %}\n                            {% endblock %}\n                        </template>\n\n                        <template v-else-if=\"isLicensed\">\n                            {% block sw_extension_store_detail_smart_bar_actions_install %}\n                                <sw-button-process\n                                    v-if=\"!isInstalled\"\n                                    variant=\"primary\"\n                                    :is-loading=\"isInstalling\"\n                                    :process-success=\"isInstallSuccessful\"\n                                    class=\"sw-extension-store-detail__action-install-extension\"\n                                    @click.prevent=\"handleInstallWithPermissionsModal\"\n                                    @process-finish=\"finishedInstall\"\n                                >\n                                    <template v-if=\"extension && extension.isTheme\">\n                                        {{ $t('sw-extension-store.detail.labelButtonInstallTheme') }}\n                                    </template>\n                                    <template v-else>\n                                        {{ $t('sw-extension-store.detail.labelButtonInstallExtension') }}\n                                    </template>\n                                </sw-button-process>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_smart_bar_actions_already_installed %}\n                                <mt-button\n                                    v-else-if=\"!canBeOpened && !isConfigurable\"\n                                    variant=\"primary\"\n                                    class=\"sw-extension-store-detail__action-open-listing\"\n                                    @click=\"openListingPage\"\n                                >\n                                    <template v-if=\"extension && extension.isTheme\">\n                                        {{ $t('sw-extension-store.detail.themeIsAlreadyInstalled') }}\n                                    </template>\n                                    <template v-else>\n                                        {{ $t('sw-extension-store.detail.extensionIsAlreadyInstalled') }}\n                                    </template>\n                                </mt-button>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_smart_bar_actions %}\n                                <sw-button-group\n                                    v-else-if=\"canBeOpened\"\n                                    split-button\n                                >\n                                    {% block sw_extension_store_detail_smart_bar_actions_open_extension %}\n                                        <mt-button\n                                            variant=\"primary\"\n                                            class=\"sw-extension-store-detail__action-open-extension\"\n                                            @click=\"openExtension\"\n                                        >\n                                            <template v-if=\"extension && extension.isTheme\">\n                                                {{ $t('sw-extension-store.detail.labelButtonOpenTheme') }}\n                                            </template>\n                                            <template v-else>\n                                                {{ $t('sw-extension-store.detail.labelButtonOpenExtension') }}\n                                            </template>\n                                        </mt-button>\n                                    {% endblock %}\n\n                                    {% block sw_extension_store_detail_smart_bar_actions_open_extension_context %}\n                                        <sw-context-button\n                                            v-if=\"isConfigurable\"\n                                            class=\"sw-extension-store-detail__action-context\"\n                                        >\n                                            <template #button>\n                                                <mt-button\n                                                    variant=\"primary\"\n                                                    square\n                                                >\n                                                    <mt-icon\n                                                        name=\"regular-chevron-down-xs\"\n                                                        size=\"16\"\n                                                    />\n                                                </mt-button>\n                                            </template>\n\n                                            <sw-context-menu-item @click=\"openConfiguration\">\n                                                {{ $t('sw-extension-store.detail.openConfiguration') }}\n                                            </sw-context-menu-item>\n                                        </sw-context-button>\n                                    {% endblock %}\n                                </sw-button-group>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_smart_bar_actions_open_configuration %}\n                                <mt-button\n                                    v-else\n                                    variant=\"primary\"\n                                    class=\"sw-extension-store-detail__action-open-configuration\"\n                                    @click=\"openConfiguration\"\n                                >\n                                    {{ $t('sw-extension-store.detail.openConfiguration') }}\n                                </mt-button>\n                            {% endblock %}\n                        </template>\n\n                        <template v-else-if=\"isEnterpriseFeature\">\n                            {% block sw_extension_store_detail_smart_bar_actions_enterprise_contact %}\n                                <mt-button\n                                    variant=\"primary\"\n                                    :link=\"$t('sw-extension-store.detail.enterpriseContactUrl')\"\n                                    class=\"sw-extension-store-detail__action-enterprise-contact\"\n                                >\n                                    {{ $t('sw-extension-store.detail.enterpriseContactLinkText') }}\n                                    <mt-icon\n                                        name=\"regular-external-link\"\n                                        size=\"12\"\n                                    />\n                                </mt-button>\n                            {% endblock %}\n                        </template>\n\n                        {% block sw_extension_store_detail_buy_modal %}\n                            <sw-extension-buy-modal\n                                v-if=\"showBuyModal\"\n                                :extension=\"extension\"\n                                @modal-close=\"closeBuyModal\"\n                            />\n                        {% endblock %}\n\n                        {% block sw_extension_store_detail_installation_failed_modal %}\n                            <sw-modal\n                                v-if=\"showInstallationFailedModal\"\n                                :title=\"extension.label\"\n                                variant=\"small\"\n                                @modal-close=\"closeInstallationFailedModal\"\n                            >\n                                {% block sw_extension_store_detail_installation_failed_modal_content %}\n                                    <sw-extension-adding-failed\n                                        :extension-name=\"extension.name\"\n                                        :title=\"installationError && installationError.title\"\n                                        :detail=\"installationError && installationError.detail\"\n                                        :documentation-link=\"installationErrorDocumentationLink\"\n                                        @close=\"closeInstallationFailedModal\"\n                                    />\n                                {% endblock %}\n                            </sw-modal>\n                        {% endblock %}\n\n                        {% block sw_extension_store_detail_in_app_purchases_listing_modal %}\n                            <sw-extension-store-in-app-purchases-listing-modal\n                                v-if=\"showInAppPurchasesListingModal\"\n                                :extension=\"extension\"\n                                :in-app-purchases=\"inAppPurchases\"\n                                @modal-close=\"closeInAppPurchasesListingModal\"\n                            />\n                        {% endblock %}\n                    {% endblock %}\n                </template>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_slot_smart_bar_context_buttons %}\n                <template #smart-bar-context-buttons>\n                    {% block sw_extension_store_detail_show_permissions %}\n                        <mt-button\n                            v-if=\"hasPermissions\"\n                            variant=\"secondary\"\n                            size=\"small\"\n                            @click=\"openPermissionsModal\"\n                        >\n                            <mt-icon\n                                name=\"solid-shield\"\n                                size=\"16px\"\n                            />\n                            {{ $t('sw-extension-store.detail.labelButtonShowPermissions') }}\n                        </mt-button>\n                    {% endblock %}\n                </template>\n            {% endblock %}\n        {% endblock %}\n\n        {% block sw_extension_store_detail_page_content %}\n            {% block sw_extension_sote_detail_page_info_alerts %}\n                <mt-banner\n                    v-if=\"isEnterpriseFeature\"\n                    variant=\"info\"\n                    class=\"sw-extension-store-detail__alert\"\n                >\n                    {{ $t('sw-extension-store.detail.enterpriseFeatureAlertText') }}\n                </mt-banner>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_images %}\n                <sw-extension-store-slider\n                    :images=\"images\"\n                    :slide-count=\"1\"\n                />\n            {% endblock %}\n\n            {% block sw_extension_store_detail_card_info %}\n                <sw-meteor-card\n                    :title=\"$t('sw-extension-store.detail.cardTitleInformation')\"\n                    class=\"sw-extension-store-detail--user-provided-data\"\n                >\n                    {% block sw_extension_store_detail_card_info_content %}\n                        <div\n                            :class=\"{ 'sw-extension-store-detail__description--collapsed': isDescriptionCollapsed }\"\n                            class=\"sw-extension-store-detail__description\"\n                            v-html=\"description\"\n                        />\n                    {% endblock %}\n\n                    {% block sw_extension_store_details_expand_description %}\n                        <mt-button\n                            v-if=\"isDescriptionCollapsed\"\n                            size=\"small\"\n                            class=\"sw-extension-store-detail__button-extend-description\"\n                            variant=\"secondary\"\n                            @click=\"expandDescription\"\n                        >\n                            {{ $t('sw-extension-store.detail.labelButtonReadMore') }}\n                        </mt-button>\n                    {% endblock %}\n                </sw-meteor-card>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_card_details %}\n                <sw-meteor-card :title=\"$t('sw-extension-store.detail.cardTitleDetails')\">\n                    {% block sw_extension_store_detail_card_details_content %}\n                        <dl class=\"sw-extension-store-detail__details-list\">\n                            {% block sw_extension_store_detail_card_details_category %}\n                                <dt>{{ $t('sw-extension-store.detail.details.labelCategory', extension.categories.length) }}</dt>\n                                <dd>{{ extensionCategoryNames }}</dd>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_details_version %}\n                                <dt>{{ $t('sw-extension-store.detail.details.labelVersion') }}</dt>\n                                <dd>{{ extension.latestVersion }}</dd>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_details_updated_at %}\n                                <dt>{{ $t('sw-extension-store.detail.details.labelUpdatedAt') }}</dt>\n                                <dd>{{ dateFilter(extension.lastUpdateDate, { month: 'numeric', year: 'numeric', hour: undefined, minute: undefined }) }}</dd>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_details_languages %}\n                                <dt v-if=\"extensionLanguages.length\">\n                                    {{ $t('sw-extension-store.detail.details.labelLanguages') }}\n                                </dt>\n                                <dd>{{ extensionLanguages }}</dd>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_details_in_app_purchases %}\n                                <template v-if=\"inAppPurchases.length\">\n                                    <dt>{{ $t('sw-extension-store.detail.inAppPurchases.label') }}</dt>\n                                    <dd>\n                                        <span class=\"sw-extension-store-detail-card-details-in-app-purchases__count\">\n                                            {{ inAppPurchases.length }}\n                                        </span>\n                                        <a\n                                            :title=\"$t('sw-extension-store.component.sw-extension-card-base.contextMenu.seeDetailsLabel')\"\n                                            class=\"sw-extension-store-detail-card-details-in-app-purchases__modal-link\"\n                                            role=\"button\"\n                                            @click=\"openInAppPurchasesListingModal\"\n                                        >\n                                            {{ $t('sw-extension-store.component.sw-extension-card-base.contextMenu.seeDetailsLabel') }}\n                                        </a>\n                                    </dd>\n                                </template>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_details_producer_website %}\n                                <template v-if=\"extension.producerWebsite\">\n                                    <dt>\n                                        <sw-external-link :href=\"extension.producerWebsite\">\n                                            {{ $t('sw-extension-store.detail.details.labelWebsite') }}\n                                        </sw-external-link>\n                                    </dt>\n                                    <dd />\n                                </template>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_details_privacy_policy %}\n                                <template v-if=\"extension.privacyPolicyLink\">\n                                    <dt>\n                                        <sw-external-link :href=\"extension.privacyPolicyLink\">\n                                            {{ $t('sw-extension-store.detail.details.labelPrivacy') }}\n                                        </sw-external-link>\n                                    </dt>\n                                    <dd />\n                                </template>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_details_additional_entries %}{% endblock %}\n                        </dl>\n                    {% endblock %}\n                </sw-meteor-card>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_card_ratings %}\n                <sw-extension-ratings-card\n                    id=\"ratings-card\"\n                    :extension=\"extension\"\n                    :producer-name=\"extension.producerName\"\n                    :is-installed-and-licensed=\"isLicensed && isInstalled\"\n                    @update-extension=\"fetchExtensionAndScrollToRatings\"\n                />\n            {% endblock %}\n\n            {% block sw_extension_store_detail_card_faq %}\n                <sw-meteor-card\n                    v-if=\"extension.faq.length > 0\"\n                    :title=\"$t('sw-extension-store.detail.cardTitleFAQ')\"\n                >\n                    {% block sw_extension_store_detail_card_faq_questions %}\n                        <section\n                            v-for=\"(question, index) in extension.faq\"\n                            :key=\"`sw-extension-store-detail__faq-question-${index}`\"\n                            class=\"sw-extension-store-detail__faq-question sw-extension-store-detail--user-provided-data\"\n                        >\n                            {% block sw_extension_store_detail_card_faq_questions_question %}\n                                <h4>{{ question.question }}</h4>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_faq_questions_answer %}\n                                <p v-html=\"question.answer\" />\n                            {% endblock %}\n                        </section>\n                    {% endblock %}\n                </sw-meteor-card>\n            {% endblock %}\n\n            {% block sw_extension_store_detail_card_changelog %}\n                <sw-meteor-card\n                    v-if=\"orderedBinaries.length > 0\"\n                    :title=\"$t('sw-extension-store.detail.cardTitleChangelog')\"\n                >\n                    {% block sw_extension_store_detail_card_changelog_entries %}\n                        <section\n                            v-for=\"(binary, index) in orderedBinaries\"\n                            :key=\"`sw-extension-store-detail__changelog-entry-${index}`\"\n                            class=\"sw-extension-store-detail__changelog-entry\"\n                        >\n                            {% block sw_extension_store_detail_card_changelog_entries_version %}\n                                <div class=\"sw-extension-store-detail__changelog-version\">\n                                    {{ binary.version }}\n                                </div>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_changelog_entries_creation_date %}\n                                <div class=\"sw-extension-store-detail__changelog-creation-date\">\n                                    {{ dateFilter(binary.creationDate, { month: 'numeric', year: 'numeric', hour: undefined, minute: undefined }) }}\n                                </div>\n                            {% endblock %}\n\n                            {% block sw_extension_store_detail_card_changelog_entries_changelog_text %}\n                                <p class=\"sw-extension-store-detail__changelog-text\" v-html=\"binary.text\" />\n                            {% endblock %}\n                        </section>\n                    {% endblock %}\n                </sw-meteor-card>\n            {% endblock %}\n        {% endblock %}\n\n        {% block sw_extension_store_detail_page_modals %}\n            {% block sw_extension_store_detail_page_permission %}\n                <sw-extension-permissions-modal\n                    v-if=\"showPermissionsModal\"\n                    :extension-label=\"extension.label\"\n                    :domains=\"extension.domains\"\n                    :permissions=\"extension.permissions\"\n                    @modal-close=\"closePermissionsModal\"\n                />\n            {% endblock %}\n\n            {% block sw_extension_store_detail_page_permission_accept %}\n                <sw-extension-permissions-modal\n                    v-if=\"showAcceptPermissionsModal\"\n                    :extension-label=\"extension.label\"\n                    :domains=\"extension.domains\"\n                    :permissions=\"extension.permissions\"\n                    :action-label=\"$t('sw-extension-store.component.sw-extension-card-base.labelAcceptAndInstall')\"\n                    @modal-close=\"closeAcceptPermissionsModal\"\n                    @close-with-action=\"closePermissionsModalAndInstallExtension\"\n                />\n            {% endblock %}\n\n            {% block sw_extension_store_detail_page_account_modal %}\n                <sw-modal\n                    v-if=\"showAccountModal\"\n                    class=\"sw-extension-store-detail__account-modal\"\n                    variant=\"large\"\n                    @modal-close=\"closeAccountModal\"\n                >\n                    <sw-extension-my-extensions-account @login-success=\"onLoginSuccess\" />\n                </sw-modal>\n            {% endblock %}\n        {% endblock %}\n    </sw-meteor-page>\n{% endblock %}\n","import template from './sw-extension-store-detail.html.twig';\nimport './sw-extension-store-detail.scss';\n\nconst { Utils } = Shopware;\n\n/**\n * @private\n */\nexport default {\n    template,\n\n    inject: [\n        'extensionStoreDataService',\n        'shopwareExtensionService',\n        'extensionHelperService',\n        'cacheApiService',\n        'inAppPurchasesService',\n    ],\n\n    mixins: ['sw-extension-error'],\n\n    props: {\n        id: {\n            type: String,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            extension: null,\n            inAppPurchases: [],\n            isLoading: false,\n            showBuyModal: false,\n            showPermissionsModal: false,\n            showAcceptPermissionsModal: false,\n            showAccountModal: false,\n            showInstallationFailedModal: false,\n            showInAppPurchasesListingModal: false,\n            isInstalling: false,\n            isInstallSuccessful: false,\n            permissionsAccepted: false,\n            isDescriptionCollapsed: false,\n            installationError: null,\n            fetchError: false,\n            canBeOpened: false,\n        };\n    },\n\n    computed: {\n        suspended() {\n            return this.extension === null;\n        },\n\n        extensionMetaData() {\n            if (this.suspended) {\n                return null;\n            }\n\n            return Shopware.Store.get('shopwareExtensions').myExtensions.data.find((extension) => {\n                return extension.id === this.extension.id;\n            });\n        },\n\n        isLicensed() {\n            if (!this.extensionMetaData) {\n                return false;\n            }\n\n            return !!this.extensionMetaData.storeLicense;\n        },\n\n        isInstalled() {\n            return !!this.extensionMetaData && !!this.extensionMetaData.installedAt;\n        },\n\n        isConfigurable() {\n            return !!this.extensionMetaData && this.extensionMetaData.configurable;\n        },\n\n        images() {\n            if (this.suspended) {\n                return [];\n            }\n\n            return this.extension.images.map((image) => {\n                return image.remoteLink;\n            });\n        },\n\n        extensionCategoryNames() {\n            if (this.suspended) {\n                return '';\n            }\n\n            return this.extension.categories.map((category) => category.details.name).join(', ');\n        },\n\n        extensionLanguages() {\n            if (this.suspended) {\n                return '';\n            }\n\n            return this.extension.languages.join(', ');\n        },\n\n        isPurchasable() {\n            if (this.suspended) {\n                return false;\n            }\n\n            if (!this.extension.variants.length) {\n                return false;\n            }\n\n            return !this.isLicensed;\n        },\n\n        languageId() {\n            return Shopware.Store.get('session').languageId;\n        },\n\n        recommendedVariant() {\n            return this.shopwareExtensionService.orderVariantsByRecommendation(this.extension.variants)[0];\n        },\n\n        dateFilter() {\n            return Shopware.Filter.getByName('date');\n        },\n\n        hasActiveDiscount() {\n            return this.shopwareExtensionService.isVariantDiscounted(this.recommendedVariant);\n        },\n\n        discountAppliesForMonths() {\n            if (!this.hasActiveDiscount) {\n                return null;\n            }\n\n            return this.recommendedVariant.discountCampaign.discountAppliesForMonths;\n        },\n\n        discountClass() {\n            return {\n                'is--discounted': this.hasActiveDiscount,\n            };\n        },\n\n        discountedPrice() {\n            return this.shopwareExtensionService.getPriceFromVariant(this.recommendedVariant);\n        },\n\n        variantClass() {\n            return {\n                'is--theme': this.extension && this.extension.isTheme,\n            };\n        },\n\n        orderedBinaries() {\n            return Utils.get(this.extension, 'binaries', []).slice().reverse();\n        },\n\n        description() {\n            return Utils.get(this.extension, 'description');\n        },\n\n        hasPermissions() {\n            return Object.keys(this.extension.permissions).length;\n        },\n\n        installationErrorDocumentationLink() {\n            return Utils.get(this.installationError, 'meta.documentationLink', null);\n        },\n\n        isEnterpriseFeature() {\n            if (this.suspended) {\n                return false;\n            }\n\n            return !!this.extension.addons.find(addon => addon === 'SW6_EnterpriseFeature');\n        },\n    },\n\n    watch: {\n        id: {\n            immediate: true,\n            handler() {\n                this.fetchExtension();\n            },\n        },\n\n        '$route.hash'() {\n            this.scrollToElementFromHash();\n        },\n\n        suspended() {\n            if (!this.suspended) {\n                // wait for all child components to be mounted\n                this.$nextTick(() => {\n                    this.scrollToElementFromHash();\n                });\n            }\n        },\n\n        languageId(newValue) {\n            if (newValue !== '') {\n                this.fetchExtension();\n            }\n        },\n\n        description() {\n            this.isDescriptionCollapsed = true;\n            this.$nextTick(() => {\n                this.checkDescriptionCollapsed();\n            });\n        },\n    },\n\n    async created() {\n        await this.shopwareExtensionService.updateExtensionData();\n        this.canBeOpened = !!this.shopwareExtensionService.getOpenLink(this.extension);\n        if (this.extension.inAppFeaturesAvailable) {\n            this.fetchInAppPurchases();\n        }\n    },\n\n    methods: {\n        async fetchExtension() {\n            this.isLoading = true;\n\n            if (this.languageId === '') {\n                return;\n            }\n\n            try {\n                this.fetchError = false;\n                this.extension = await this.extensionStoreDataService.getDetail(\n                    this.id,\n                    { ...Shopware.Context.api, languageId: this.languageId },\n                );\n            } catch (error) {\n                const errorData = error.response.data.errors[0];\n\n                if (errorData.code === 'FRAMEWORK__STORE_ERROR' && errorData.title === 'Extension unknown') {\n                    this.fetchError = errorData;\n\n                     \n                    const docLink = this.$t('sw-extension.errors.messageToTheShopwareDocumentation', errorData.meta);\n\n                    this.createNotificationError({\n                        title: errorData.title,\n                        message: `${errorData.detail} <br> ${docLink}`,\n                        autoClose: false,\n                    });\n\n                    return;\n                }\n\n                this.showExtensionErrors(error);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async fetchExtensionAndScrollToRatings() {\n            await this.fetchExtension();\n            this.$router.push({ hash: '#ratings-card' });\n        },\n\n        scrollToElementFromHash() {\n            if (!this.$route.hash) {\n                return;\n            }\n\n            const elementWithHashId = this.$el.querySelector(this.$route.hash);\n            const pageBody = document.querySelector('div.sw-meteor-page__body');\n            const header = document.querySelector('header.sw-meteor-page__head-area');\n\n            const topOfElement = elementWithHashId.offsetTop - header.getBoundingClientRect().height;\n\n            pageBody.scroll({ top: topOfElement, behavior: 'smooth' });\n\n            // clear hash so user can click link again\n            this.$router.push({ ...this.route, hash: null });\n        },\n\n        async onClickAddExtension() {\n            await this.shopwareExtensionService.checkLogin();\n\n            if (!Shopware.Store.get('shopwareExtensions').userInfo) {\n                this.openAccountModal();\n                return;\n            }\n\n            this.openBuyModal();\n        },\n\n        renderPrice(price) {\n            return Utils.format.currency(price, 'EUR');\n        },\n\n        onLoginSuccess() {\n            this.closeAccountModal();\n            this.openBuyModal();\n        },\n\n        openBuyModal() {\n            this.showBuyModal = true;\n        },\n\n        closeBuyModal() {\n            this.showBuyModal = false;\n        },\n\n        openAccountModal() {\n            this.showAccountModal = true;\n        },\n\n        closeAccountModal() {\n            this.showAccountModal = false;\n        },\n\n        openPermissionsModal() {\n            this.showPermissionsModal = true;\n        },\n\n        closePermissionsModal() {\n            this.showPermissionsModal = false;\n        },\n\n        openAcceptPermissionsModal() {\n            this.showAcceptPermissionsModal = true;\n        },\n\n        closeAcceptPermissionsModal() {\n            this.showAcceptPermissionsModal = false;\n        },\n\n        openInAppPurchasesListingModal() {\n            this.showInAppPurchasesListingModal = true;\n        },\n\n        closeInAppPurchasesListingModal() {\n            this.showInAppPurchasesListingModal = false;\n        },\n\n        async closePermissionsModalAndInstallExtension() {\n            this.permissionsAccepted = true;\n            this.closeAcceptPermissionsModal();\n            await this.installExtension();\n        },\n\n        async handleInstallWithPermissionsModal() {\n            if (Object.keys(this.extension.permissions).length) {\n                this.openAcceptPermissionsModal();\n\n                return;\n            }\n\n            this.permissionsAccepted = true;\n            await this.installExtension();\n        },\n\n        async installExtension() {\n            this.isInstalling = true;\n\n            try {\n                await this.extensionHelperService.downloadAndActivateExtension(this.extension.name, this.extension.type);\n\n                if (this.extension.type === 'plugin') {\n                    await this.cacheApiService.clear();\n                }\n\n                this.isInstallSuccessful = true;\n\n                window.location.reload();\n            } catch (error) {\n                this.showExtensionErrors(error);\n\n                if (Utils.get(error, 'response.data.errors[0]', null)) {\n                    this.installationError = error.response.data.errors[0];\n                }\n\n                this.openInstallationFailedModal();\n            } finally {\n                this.isInstalling = false;\n            }\n        },\n\n        async finishedInstall() {\n            await this.shopwareExtensionService.updateExtensionData();\n            this.isInstallSuccessful = false;\n        },\n\n        async openExtension() {\n            const openLink = await this.shopwareExtensionService.getOpenLink(this.extension);\n\n            if (openLink) {\n                this.$router.push(openLink);\n            }\n        },\n\n        openConfiguration() {\n            this.$router.push({ name: 'sw.extension.config', params: { namespace: this.extension.name } });\n        },\n\n        openListingPage() {\n            if (this.extension && this.extension.isTheme) {\n                this.$router.push({ name: 'sw.extension.my-extensions.listing.theme' });\n                return;\n            }\n\n            this.$router.push({ name: 'sw.extension.my-extensions.listing.app' });\n        },\n\n        checkDescriptionCollapsed() {\n            const description = this.$el.querySelector('.sw-extension-store-detail__description');\n\n            if (description && description.scrollHeight <= 300) {\n                this.expandDescription();\n            }\n        },\n\n        expandDescription() {\n            this.isDescriptionCollapsed = false;\n        },\n\n        openInstallationFailedModal() {\n            this.showInstallationFailedModal = true;\n        },\n\n        closeInstallationFailedModal() {\n            this.showInstallationFailedModal = false;\n        },\n\n        async fetchInAppPurchases() {\n            this.inAppPurchases = await this.inAppPurchasesService.getAvailablePurchases(this.extension.name);\n        },\n    },\n};\n"],"names":["template","Utils","index","extension","image","category","addon","newValue","error","errorData","docLink","elementWithHashId","pageBody","header","topOfElement","price","openLink","description"],"mappings":"AAAA,MAAAA,EAAe,w2hBCGT,CAAE,MAAAC,CAAK,EAAK,SAKlBC,EAAe,CACX,SAAAF,EAEA,OAAQ,CACJ,4BACA,2BACA,yBACA,kBACA,uBACR,EAEI,OAAQ,CAAC,oBAAoB,EAE7B,MAAO,CACH,GAAI,CACA,KAAM,OACN,SAAU,EACtB,CACA,EAEI,MAAO,CACH,MAAO,CACH,UAAW,KACX,eAAgB,CAAA,EAChB,UAAW,GACX,aAAc,GACd,qBAAsB,GACtB,2BAA4B,GAC5B,iBAAkB,GAClB,4BAA6B,GAC7B,+BAAgC,GAChC,aAAc,GACd,oBAAqB,GACrB,oBAAqB,GACrB,uBAAwB,GACxB,kBAAmB,KACnB,WAAY,GACZ,YAAa,EACzB,CACA,EAEI,SAAU,CACN,WAAY,CACR,OAAO,KAAK,YAAc,IACtC,EAEQ,mBAAoB,CAChB,OAAI,KAAK,UACE,KAGJ,SAAS,MAAM,IAAI,oBAAoB,EAAE,aAAa,KAAK,KAAMG,GAC7DA,EAAU,KAAO,KAAK,UAAU,EAC1C,CACb,EAEQ,YAAa,CACT,OAAK,KAAK,kBAIH,CAAC,CAAC,KAAK,kBAAkB,aAHrB,EAIvB,EAEQ,aAAc,CACV,MAAO,CAAC,CAAC,KAAK,mBAAqB,CAAC,CAAC,KAAK,kBAAkB,WACxE,EAEQ,gBAAiB,CACb,MAAO,CAAC,CAAC,KAAK,mBAAqB,KAAK,kBAAkB,YACtE,EAEQ,QAAS,CACL,OAAI,KAAK,UACE,CAAA,EAGJ,KAAK,UAAU,OAAO,IAAKC,GACvBA,EAAM,UAChB,CACb,EAEQ,wBAAyB,CACrB,OAAI,KAAK,UACE,GAGJ,KAAK,UAAU,WAAW,IAAKC,GAAaA,EAAS,QAAQ,IAAI,EAAE,KAAK,IAAI,CAC/F,EAEQ,oBAAqB,CACjB,OAAI,KAAK,UACE,GAGJ,KAAK,UAAU,UAAU,KAAK,IAAI,CACrD,EAEQ,eAAgB,CAKZ,OAJI,KAAK,WAIL,CAAC,KAAK,UAAU,SAAS,OAClB,GAGJ,CAAC,KAAK,UACzB,EAEQ,YAAa,CACT,OAAO,SAAS,MAAM,IAAI,SAAS,EAAE,UACjD,EAEQ,oBAAqB,CACjB,OAAO,KAAK,yBAAyB,8BAA8B,KAAK,UAAU,QAAQ,EAAE,CAAC,CACzG,EAEQ,YAAa,CACT,OAAO,SAAS,OAAO,UAAU,MAAM,CACnD,EAEQ,mBAAoB,CAChB,OAAO,KAAK,yBAAyB,oBAAoB,KAAK,kBAAkB,CAC5F,EAEQ,0BAA2B,CACvB,OAAK,KAAK,kBAIH,KAAK,mBAAmB,iBAAiB,yBAHrC,IAIvB,EAEQ,eAAgB,CACZ,MAAO,CACH,iBAAkB,KAAK,iBACvC,CACA,EAEQ,iBAAkB,CACd,OAAO,KAAK,yBAAyB,oBAAoB,KAAK,kBAAkB,CAC5F,EAEQ,cAAe,CACX,MAAO,CACH,YAAa,KAAK,WAAa,KAAK,UAAU,OAC9D,CACA,EAEQ,iBAAkB,CACd,OAAOJ,EAAM,IAAI,KAAK,UAAW,WAAY,EAAE,EAAE,MAAK,EAAG,QAAO,CAC5E,EAEQ,aAAc,CACV,OAAOA,EAAM,IAAI,KAAK,UAAW,aAAa,CAC1D,EAEQ,gBAAiB,CACb,OAAO,OAAO,KAAK,KAAK,UAAU,WAAW,EAAE,MAC3D,EAEQ,oCAAqC,CACjC,OAAOA,EAAM,IAAI,KAAK,kBAAmB,yBAA0B,IAAI,CACnF,EAEQ,qBAAsB,CAClB,OAAI,KAAK,UACE,GAGJ,CAAC,CAAC,KAAK,UAAU,OAAO,KAAKK,GAASA,IAAU,uBAAuB,CAC1F,CACA,EAEI,MAAO,CACH,GAAI,CACA,UAAW,GACX,SAAU,CACN,KAAK,eAAc,CACnC,CACA,EAEQ,eAAgB,CACZ,KAAK,wBAAuB,CACxC,EAEQ,WAAY,CACH,KAAK,WAEN,KAAK,UAAU,IAAM,CACjB,KAAK,wBAAuB,CAChD,CAAiB,CAEjB,EAEQ,WAAWC,EAAU,CACbA,IAAa,IACb,KAAK,eAAc,CAEnC,EAEQ,aAAc,CACV,KAAK,uBAAyB,GAC9B,KAAK,UAAU,IAAM,CACjB,KAAK,0BAAyB,CAC9C,CAAa,CACb,CACA,EAEI,MAAM,SAAU,CACZ,MAAM,KAAK,yBAAyB,oBAAmB,EACvD,KAAK,YAAc,CAAC,CAAC,KAAK,yBAAyB,YAAY,KAAK,SAAS,EACzE,KAAK,UAAU,wBACf,KAAK,oBAAmB,CAEpC,EAEI,QAAS,CACL,MAAM,gBAAiB,CAGnB,GAFA,KAAK,UAAY,GAEb,KAAK,aAAe,GAIxB,GAAI,CACA,KAAK,WAAa,GAClB,KAAK,UAAY,MAAM,KAAK,0BAA0B,UAClD,KAAK,GACL,CAAE,GAAG,SAAS,QAAQ,IAAK,WAAY,KAAK,UAAU,CAC1E,CACA,OAAqBC,EAAO,CACZ,MAAMC,EAAYD,EAAM,SAAS,KAAK,OAAO,CAAC,EAE9C,GAAIC,EAAU,OAAS,0BAA4BA,EAAU,QAAU,oBAAqB,CACxF,KAAK,WAAaA,EAGlB,MAAMC,EAAU,KAAK,GAAG,wDAAyDD,EAAU,IAAI,EAE/F,KAAK,wBAAwB,CACzB,MAAOA,EAAU,MACjB,QAAS,GAAGA,EAAU,MAAM,SAASC,CAAO,GAC5C,UAAW,EACnC,CAAqB,EAED,MACpB,CAEgB,KAAK,oBAAoBF,CAAK,CAC9C,QAAa,CACG,KAAK,UAAY,EACjC,CACA,EAEQ,MAAM,kCAAmC,CACrC,MAAM,KAAK,eAAc,EACzB,KAAK,QAAQ,KAAK,CAAE,KAAM,eAAe,CAAE,CACvD,EAEQ,yBAA0B,CACtB,GAAI,CAAC,KAAK,OAAO,KACb,OAGJ,MAAMG,EAAoB,KAAK,IAAI,cAAc,KAAK,OAAO,IAAI,EAC3DC,EAAW,SAAS,cAAc,0BAA0B,EAC5DC,EAAS,SAAS,cAAc,kCAAkC,EAElEC,EAAeH,EAAkB,UAAYE,EAAO,sBAAqB,EAAG,OAElFD,EAAS,OAAO,CAAE,IAAKE,EAAc,SAAU,SAAU,EAGzD,KAAK,QAAQ,KAAK,CAAE,GAAG,KAAK,MAAO,KAAM,KAAM,CAC3D,EAEQ,MAAM,qBAAsB,CAGxB,GAFA,MAAM,KAAK,yBAAyB,WAAU,EAE1C,CAAC,SAAS,MAAM,IAAI,oBAAoB,EAAE,SAAU,CACpD,KAAK,iBAAgB,EACrB,MAChB,CAEY,KAAK,aAAY,CAC7B,EAEQ,YAAYC,EAAO,CACf,OAAOd,EAAM,OAAO,SAASc,EAAO,KAAK,CACrD,EAEQ,gBAAiB,CACb,KAAK,kBAAiB,EACtB,KAAK,aAAY,CAC7B,EAEQ,cAAe,CACX,KAAK,aAAe,EAChC,EAEQ,eAAgB,CACZ,KAAK,aAAe,EAChC,EAEQ,kBAAmB,CACf,KAAK,iBAAmB,EACpC,EAEQ,mBAAoB,CAChB,KAAK,iBAAmB,EACpC,EAEQ,sBAAuB,CACnB,KAAK,qBAAuB,EACxC,EAEQ,uBAAwB,CACpB,KAAK,qBAAuB,EACxC,EAEQ,4BAA6B,CACzB,KAAK,2BAA6B,EAC9C,EAEQ,6BAA8B,CAC1B,KAAK,2BAA6B,EAC9C,EAEQ,gCAAiC,CAC7B,KAAK,+BAAiC,EAClD,EAEQ,iCAAkC,CAC9B,KAAK,+BAAiC,EAClD,EAEQ,MAAM,0CAA2C,CAC7C,KAAK,oBAAsB,GAC3B,KAAK,4BAA2B,EAChC,MAAM,KAAK,iBAAgB,CACvC,EAEQ,MAAM,mCAAoC,CACtC,GAAI,OAAO,KAAK,KAAK,UAAU,WAAW,EAAE,OAAQ,CAChD,KAAK,2BAA0B,EAE/B,MAChB,CAEY,KAAK,oBAAsB,GAC3B,MAAM,KAAK,iBAAgB,CACvC,EAEQ,MAAM,kBAAmB,CACrB,KAAK,aAAe,GAEpB,GAAI,CACA,MAAM,KAAK,uBAAuB,6BAA6B,KAAK,UAAU,KAAM,KAAK,UAAU,IAAI,EAEnG,KAAK,UAAU,OAAS,UACxB,MAAM,KAAK,gBAAgB,MAAK,EAGpC,KAAK,oBAAsB,GAE3B,OAAO,SAAS,OAAM,CACtC,OAAqBP,EAAO,CACZ,KAAK,oBAAoBA,CAAK,EAE1BP,EAAM,IAAIO,EAAO,0BAA2B,IAAI,IAChD,KAAK,kBAAoBA,EAAM,SAAS,KAAK,OAAO,CAAC,GAGzD,KAAK,4BAA2B,CAChD,QAAa,CACG,KAAK,aAAe,EACpC,CACA,EAEQ,MAAM,iBAAkB,CACpB,MAAM,KAAK,yBAAyB,oBAAmB,EACvD,KAAK,oBAAsB,EACvC,EAEQ,MAAM,eAAgB,CAClB,MAAMQ,EAAW,MAAM,KAAK,yBAAyB,YAAY,KAAK,SAAS,EAE3EA,GACA,KAAK,QAAQ,KAAKA,CAAQ,CAE1C,EAEQ,mBAAoB,CAChB,KAAK,QAAQ,KAAK,CAAE,KAAM,sBAAuB,OAAQ,CAAE,UAAW,KAAK,UAAU,IAAI,CAAE,CAAE,CACzG,EAEQ,iBAAkB,CACd,GAAI,KAAK,WAAa,KAAK,UAAU,QAAS,CAC1C,KAAK,QAAQ,KAAK,CAAE,KAAM,0CAA0C,CAAE,EACtE,MAChB,CAEY,KAAK,QAAQ,KAAK,CAAE,KAAM,wCAAwC,CAAE,CAChF,EAEQ,2BAA4B,CACxB,MAAMC,EAAc,KAAK,IAAI,cAAc,yCAAyC,EAEhFA,GAAeA,EAAY,cAAgB,KAC3C,KAAK,kBAAiB,CAEtC,EAEQ,mBAAoB,CAChB,KAAK,uBAAyB,EAC1C,EAEQ,6BAA8B,CAC1B,KAAK,4BAA8B,EAC/C,EAEQ,8BAA+B,CAC3B,KAAK,4BAA8B,EAC/C,EAEQ,MAAM,qBAAsB,CACxB,KAAK,eAAiB,MAAM,KAAK,sBAAsB,sBAAsB,KAAK,UAAU,IAAI,CAC5G,CACA,CACA"}