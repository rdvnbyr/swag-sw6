{"version":3,"file":"index-DRvH5o4y.js","sources":["../../../app/administration/src/module/sw-extension-store/component/sw-extension-listing-card/sw-extension-listing-card.html.twig","../../../app/administration/src/module/sw-extension-store/component/sw-extension-listing-card/index.js"],"sourcesContent":["{% block sw_extension_listing_card %}\n    <div class=\"sw-extension-listing-card\" @click=\"openDetailPage\">\n        {% block sw_extension_listing_card_content %}\n            {% block sw_extension_listing_card_preview %}\n                <div class=\"sw-extension-listing-card__preview\" :style=\"previewMedia\">\n                    {% block sw_extension_listing_card_preview_type_label %}\n                        <sw-extension-type-label\n                            :type=\"extension.type\"\n                            class=\"sw-extension-listing-card__extension-type-label\"\n                        />\n                    {% endblock %}\n                </div>\n            {% endblock %}\n\n            {% block sw_extension_listing_card_info_grid %}\n                <div class=\"sw-extension-listing-card__info-grid\">\n                    {% block sw_extension_listing_card_info_name %}\n                        <p class=\"sw-extension-listing-card__info-name\">\n                            {{ extension.label }}\n                        </p>\n                    {% endblock %}\n\n                    {% block sw_extension_listing_card_info_description %}\n                        <p class=\"sw-extension-listing-card__info-description is--wrap-content\">\n                            {{ extension.shortDescription }}\n                        </p>\n                    {% endblock %}\n\n                    {% block sw_extension_listing_card_info_rating %}\n                        <div class=\"sw-extension-listing-card__info-rating\">\n                            <sw-extension-rating-stars\n                                class=\"sw-extension-listing-card__info-rating-stars\"\n                                :rating=\"extension.rating\"\n                                :size=\"12\"\n                            />\n\n                            <span class=\"sw-extension-listing-card__info-rating-count\">\n                                {{ extension.numberOfRatings }}\n                            </span>\n                        </div>\n                    {% endblock %}\n\n                    {% block sw_extension_listing_card_info_price %}\n                        <div class=\"sw-extension-listing-card__info-price\">\n                            <template v-if=\"isInstalled\">\n                                {{ $t('sw-extension-store.component.sw-extension-listing-card.labelInstalled') }}\n                            </template>\n\n                            <template v-else-if=\"isLicensed\">\n                                {{ $t('sw-extension-store.component.sw-extension-listing-card.labelLicensed') }}\n                            </template>\n\n                            <span v-else :class=\"discountClass\">{{ calculatedPrice }}</span>\n                        </div>\n                    {% endblock %}\n\n                    {% block sw_extension_listing_card_label_display %}\n                        <sw-extension-store-label-display\n                            v-if=\"extension.labels.length > 0\"\n                            :labels=\"extension.labels\"\n                            class=\"sw-extension-listing-card__label-display\"\n                        />\n                    {% endblock %}\n                </div>\n            {% endblock %}\n        {% endblock %}\n    </div>\n{% endblock %}\n","import template from './sw-extension-listing-card.html.twig';\nimport './sw-extension-listing-card.scss';\n\nconst { Utils } = Shopware;\n\n/**\n * @private\n */\nexport default {\n    template,\n\n    inject: [\n        'shopwareExtensionService',\n    ],\n\n    props: {\n        extension: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    computed: {\n        assetFilter() {\n            return Shopware.Filter.getByName('asset');\n        },\n\n        previewMedia() {\n            const image = Utils.get(this.extension, 'images[0]', null);\n\n            if (!image) {\n                const previewImage = this.assetFilter('/swagextensionstore/administration/static/img/theme/default_theme_preview.jpg');\n                return {\n                    'background-image': `url('${previewImage}')`,\n                };\n            }\n\n            return {\n                'background-image': `url('${image.remoteLink}')`,\n                'background-size': 'cover',\n            };\n        },\n\n        recommendedVariant() {\n            return this.shopwareExtensionService.orderVariantsByRecommendation(this.extension.variants)[0];\n        },\n\n        hasActiveDiscount() {\n            return this.shopwareExtensionService.isVariantDiscounted(this.recommendedVariant);\n        },\n\n        discountClass() {\n            return {\n                'sw-extension-listing-card__info-price-discounted': this.hasActiveDiscount,\n            };\n        },\n\n        calculatedPrice() {\n            if (!this.recommendedVariant) {\n                return null;\n            }\n\n            return this.$t(\n                'sw-extension-store.general.labelPrice',\n                {\n                    price: Utils.format.currency(\n                        this.shopwareExtensionService.getPriceFromVariant(this.recommendedVariant),\n                        'EUR',\n                    ),\n                },\n                this.shopwareExtensionService.mapVariantToRecommendation(this.recommendedVariant),\n            );\n        },\n\n        isInstalled() {\n            return !!Shopware.Store.get('shopwareExtensions').myExtensions.data.some((installedExtension) => {\n                return installedExtension.installedAt && installedExtension.name === this.extension.name;\n            });\n        },\n\n        isLicensed() {\n            const extension = Shopware.Store.get('shopwareExtensions').myExtensions.data\n                .find((installedExtension) => installedExtension.name === this.extension.name);\n\n            if (extension === undefined) {\n                return false;\n            }\n\n            return !!extension.storeLicense;\n        },\n    },\n\n    methods: {\n        openDetailPage() {\n            this.$router.push({\n                name: 'sw.extension.store.detail',\n                params: { id: this.extension.id.toString() },\n            });\n        },\n    },\n};\n"],"names":["template","Utils","index","image","installedExtension","extension"],"mappings":"AAAA,MAAAA,EAAe,05DCGT,CAAE,MAAAC,CAAK,EAAK,SAKlBC,EAAe,CACX,SAAAF,EAEA,OAAQ,CACJ,0BACR,EAEI,MAAO,CACH,UAAW,CACP,KAAM,OACN,SAAU,EACtB,CACA,EAEI,SAAU,CACN,aAAc,CACV,OAAO,SAAS,OAAO,UAAU,OAAO,CACpD,EAEQ,cAAe,CACX,MAAMG,EAAQF,EAAM,IAAI,KAAK,UAAW,YAAa,IAAI,EAEzD,OAAKE,EAOE,CACH,mBAAoB,QAAQA,EAAM,UAAU,KAC5C,kBAAmB,OACnC,EARuB,CACH,mBAAoB,QAFH,KAAK,YAAY,+EAA+E,CAEzE,IAC5D,CAOA,EAEQ,oBAAqB,CACjB,OAAO,KAAK,yBAAyB,8BAA8B,KAAK,UAAU,QAAQ,EAAE,CAAC,CACzG,EAEQ,mBAAoB,CAChB,OAAO,KAAK,yBAAyB,oBAAoB,KAAK,kBAAkB,CAC5F,EAEQ,eAAgB,CACZ,MAAO,CACH,mDAAoD,KAAK,iBACzE,CACA,EAEQ,iBAAkB,CACd,OAAK,KAAK,mBAIH,KAAK,GACR,wCACA,CACI,MAAOF,EAAM,OAAO,SAChB,KAAK,yBAAyB,oBAAoB,KAAK,kBAAkB,EACzE,KACxB,CACA,EACgB,KAAK,yBAAyB,2BAA2B,KAAK,kBAAkB,CAChG,EAZuB,IAavB,EAEQ,aAAc,CACV,MAAO,CAAC,CAAC,SAAS,MAAM,IAAI,oBAAoB,EAAE,aAAa,KAAK,KAAMG,GAC/DA,EAAmB,aAAeA,EAAmB,OAAS,KAAK,UAAU,IACvF,CACb,EAEQ,YAAa,CACT,MAAMC,EAAY,SAAS,MAAM,IAAI,oBAAoB,EAAE,aAAa,KACnE,KAAMD,GAAuBA,EAAmB,OAAS,KAAK,UAAU,IAAI,EAEjF,OAAIC,IAAc,OACP,GAGJ,CAAC,CAACA,EAAU,YAC/B,CACA,EAEI,QAAS,CACL,gBAAiB,CACb,KAAK,QAAQ,KAAK,CACd,KAAM,4BACN,OAAQ,CAAE,GAAI,KAAK,UAAU,GAAG,UAAU,CAC1D,CAAa,CACb,CACA,CACA"}