{"version":3,"file":"index-LL5-5fQ2.js","sources":["../../../app/administration/src/module/sw-extension-store/component/sw-extension-store-update-warning/sw-extension-store-update-warning.html.twig","../../../app/administration/src/module/sw-extension-store/component/sw-extension-store-update-warning/index.js"],"sourcesContent":["{% block sw_extension_store_update_warning %}\n    <sw-extension-store-error-card\n        variant=\"info\"\n        class=\"sw-extension-store-update-warning\"\n        :title=\"$t('sw-extension-store.updateWarning.headline')\"\n    >\n        <template #default>\n            {% block sw_extension_store_update_warning_description %}\n                <p>\n                    {{ $t('sw-extension-store.updateWarning.description') }}\n                </p>\n                <p class=\"sw-extension-store-update-warning__strong-text\">\n                    {{ $t('sw-extension-store.updateWarning.requestDescription') }}\n                </p>\n            {% endblock %}\n        </template>\n\n        <template #actions>\n            {% block sw_extension_store_update_warning_actions %}\n                <mt-button\n                    variant=\"primary\"\n                    :is-loading=\"isUpdating\"\n                    @click=\"updateExtension\"\n                >\n                    {{ $t('sw-extension-store.updateWarning.update') }}\n                </mt-button>\n            {% endblock %}\n        </template>\n    </sw-extension-store-error-card>\n{% endblock %}\n","import template from './sw-extension-store-update-warning.html.twig';\nimport './sw-extension-store-update-warning.scss';\n\nconst { Mixin } = Shopware;\n\n/**\n * @private\n */\nexport default {\n    template,\n\n    inject: [\n        'shopwareExtensionService',\n        'extensionStoreActionService',\n        'cacheApiService',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    data() {\n        return {\n            isUpdating: false,\n        };\n    },\n\n    computed: {},\n\n    methods: {\n        async updateExtension() {\n            this.isUpdating = true;\n\n            try {\n                await this.extensionStoreActionService.downloadExtension('SwagExtensionStore');\n                await this.shopwareExtensionService.updateExtension('SwagExtensionStore', 'plugin');\n                await this.clearCacheAndReloadPage();\n            } catch (e) {\n                this.isUpdating = false;\n\n                Shopware.Utils.debug.error(e);\n                this.createNotificationError({\n                    message: this.$t(\n                        'global.notification.unspecifiedSaveErrorMessage',\n                    ),\n                });\n            }\n        },\n\n        clearCacheAndReloadPage() {\n            return this.cacheApiService.clear().then(() => {\n                window.location.reload();\n            });\n        },\n    },\n};\n"],"names":["template","Mixin","index"],"mappings":"AAAA,MAAAA,EAAe,qxBCGT,CAAE,MAAAC,CAAK,EAAK,SAKlBC,EAAe,CACX,SAAAF,EAEA,OAAQ,CACJ,2BACA,8BACA,iBACR,EAEI,OAAQ,CACJC,EAAM,UAAU,cAAc,CACtC,EAEI,MAAO,CACH,MAAO,CACH,WAAY,EACxB,CACA,EAEI,SAAU,CAAA,EAEV,QAAS,CACL,MAAM,iBAAkB,CACpB,KAAK,WAAa,GAElB,GAAI,CACA,MAAM,KAAK,4BAA4B,kBAAkB,oBAAoB,EAC7E,MAAM,KAAK,yBAAyB,gBAAgB,qBAAsB,QAAQ,EAClF,MAAM,KAAK,wBAAuB,CAClD,OAAqB,EAAG,CACR,KAAK,WAAa,GAElB,SAAS,MAAM,MAAM,MAAM,CAAC,EAC5B,KAAK,wBAAwB,CACzB,QAAS,KAAK,GACV,iDACxB,CACA,CAAiB,CACjB,CACA,EAEQ,yBAA0B,CACtB,OAAO,KAAK,gBAAgB,MAAK,EAAG,KAAK,IAAM,CAC3C,OAAO,SAAS,OAAM,CACtC,CAAa,CACb,CACA,CACA"}