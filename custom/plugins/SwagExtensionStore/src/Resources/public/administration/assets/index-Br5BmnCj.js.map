{"version":3,"file":"index-Br5BmnCj.js","sources":["../../../app/administration/src/module/sw-in-app-purchases/component/sw-in-app-purchase-checkout-overview/sw-in-app-purchase-checkout-overview.html.twig","../../../app/administration/src/module/sw-in-app-purchases/component/sw-in-app-purchase-checkout-overview/index.ts"],"sourcesContent":["<div class=\"sw-in-app-purchase-checkout-purchase\">\n    <div class=\"sw-in-app-purchase-checkout-purchase__feature\">\n        <p class=\"sw-in-app-purchase-checkout-purchase__feature__name\">\n            {{ purchase.name }}\n        </p>\n\n        <p class=\"sw-in-app-purchase-checkout-purchase__feature__description\">\n            {{ purchase.description }}\n        </p>\n    </div>\n\n    <sw-in-app-purchase-price-box\n        v-if=\"purchase.priceModels.length === 1\"\n        :price-model=\"priceModel\"\n    />\n\n    <sw-radio-field\n        v-else\n        block\n        :options=\"purchaseOptions\"\n        class=\"sw-in-app-purchase-checkout-purchase__feature__choices\"\n        @update:value=\"setPriceModel\"\n    />\n\n    <div class=\"sw-in-app-purchase-checkout-purchase__subtext\">\n        <p class=\"sw-in-app-purchase-checkout-purchase__subtext__bill\">\n            {{ $t('sw-in-app-purchase-checkout-overview.billHint') }}\n        </p>\n\n        <p class=\"sw-in-app-purchase-checkout-purchase__subtext__exclude_vat\">\n            {{ $t('sw-in-app-purchase-checkout-overview.excludeVat') }}\n        </p>\n\n        <mt-checkbox\n            v-if=\"priceModel.conditionsType !== null\"\n            v-model:value=\"gtcAccepted\"\n            :checked=\"gtcAccepted\"\n            class=\"sw-in-app-purchase-checkout-purchase__subtext__partner_gtc\"\n            @update:checked=\"onGtcAcceptedChange\"\n        >\n            <template #label>\n                {{ $t('sw-in-app-purchase-checkout-overview.partner.accept') }}\n                <mt-link\n                    v-if=\"priceModel.conditionsType === 'gtc'\"\n                    type=\"external\"\n                    as=\"a\"\n                    :href=\"purchase.websiteGtc\"\n                >\n                    {{ $t('sw-in-app-purchase-checkout-overview.partner.gtc', { partner: producer }, 0) }}\n                </mt-link>\n                <mt-link\n                    v-else-if=\"priceModel.conditionsType === 'detailed'\"\n                    type=\"internal\"\n                    as=\"button\"\n                    @click=\"openConditionsModal()\"\n                >\n                    {{ $t('sw-in-app-purchase-checkout-overview.partner.conditions', { partner: producer }, 0) }}\n                </mt-link>\n            </template>\n        </mt-checkbox>\n\n        <sw-gtc-checkbox\n            :value=\"tosAccepted\"\n            class=\"sw-in-app-purchase-checkout-purchase__subtext__tos\"\n            @update:value=\"onTosAcceptedChange\"\n        />\n    </div>\n\n    <sw-modal\n        v-if=\"priceModel.conditionsType === 'detailed' && showConditionsModal\"\n        :title=\"$t('sw-in-app-purchase-checkout-overview.partner.conditions-header')\"\n        variant=\"small\"\n        @modal-close=\"closeConditionsModal\"\n    >\n        <div v-html=\"$sanitize(purchase.serviceConditions, { ALLOWED_TAGS: ['a', 'b', 'i', 'u', 'br', 'ul', 'li', 'ol'], ALLOWED_ATTR: ['href', 'target'] })\" />\n\n        <template #modal-footer>\n            <sw-button\n                variant=\"secondary\"\n                @click=\"closeConditionsModal\"\n            >\n                {{ $t('sw-in-app-purchase-checkout-button.closeButton') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n</div>\n","import type * as IAP from 'SwagExtensionStore/module/sw-in-app-purchases/types';\nimport template from './sw-in-app-purchase-checkout-overview.html.twig';\nimport './sw-in-app-purchase-checkout-overview.scss';\n\n/**\n * @private\n */\nexport default Shopware.Component.wrapComponentConfig({\n    template,\n\n    emits: ['update:tos-accepted', 'update:gtc-accepted', 'update:variant'],\n\n    props: {\n        purchase: {\n            type: Object as PropType<IAP.InAppPurchase>,\n            required: true,\n        },\n        tosAccepted: {\n            type: Boolean,\n            required: true,\n        },\n        gtcAccepted: {\n            type: Boolean,\n            required: true,\n        },\n        producer: {\n            type: String,\n            required: true,\n        },\n    },\n\n    data(): {\n        showConditionsModal: boolean;\n        priceModel: IAP.InAppPurchasePriceModel;\n    } {\n        return {\n            showConditionsModal: false,\n            priceModel: this.purchase.priceModels[0],\n        };\n    },\n\n    created() {\n        this.setPriceModel();\n    },\n\n    computed: {\n        purchaseOptions(): Array<{ value: IAP.InAppPurchasePriceModel; name: string }> {\n            return this.purchase.priceModels.map((priceModel): { value: IAP.InAppPurchasePriceModel; name: string } => {\n                return {\n                    value: priceModel,\n                    name: `â‚¬${priceModel.price}* /${this.$t(`sw-in-app-purchase-price-box.duration.${priceModel.variant}`)}`,\n                };\n            });\n        },\n    },\n\n    methods: {\n        openConditionsModal() {\n            this.showConditionsModal = true;\n        },\n\n        closeConditionsModal() {\n            this.showConditionsModal = false;\n        },\n\n        onTosAcceptedChange(value: boolean) {\n            this.$emit('update:tos-accepted', value);\n        },\n\n        onGtcAcceptedChange(value: boolean) {\n            this.$emit('update:gtc-accepted', value);\n        },\n\n        setPriceModel(priceModel?: IAP.InAppPurchasePriceModel) {\n            if (!priceModel) {\n                priceModel = this.purchase.priceModels[0];\n            }\n            this.priceModel = priceModel;\n            this.onGtcAcceptedChange(priceModel.conditionsType === null);\n            this.$emit('update:variant', priceModel.variant);\n        },\n    },\n});\n"],"names":["template","index","priceModel","value"],"mappings":"AAAA,MAAAA,EAAe,oyECOfC,EAAe,SAAS,UAAU,oBAAoB,CAClD,SAAAD,EAEA,MAAO,CAAC,sBAAuB,sBAAuB,gBAAgB,EAEtE,MAAO,CACH,SAAU,CACN,KAAM,OACN,SAAU,EAAA,EAEd,YAAa,CACT,KAAM,QACN,SAAU,EAAA,EAEd,YAAa,CACT,KAAM,QACN,SAAU,EAAA,EAEd,SAAU,CACN,KAAM,OACN,SAAU,EAAA,CACd,EAGJ,MAGE,CACE,MAAO,CACH,oBAAqB,GACrB,WAAY,KAAK,SAAS,YAAY,CAAC,CAAA,CAC3C,EAGJ,SAAU,CACN,KAAK,cAAA,CAAc,EAGvB,SAAU,CACN,iBAA+E,CAC3E,OAAO,KAAK,SAAS,YAAY,IAAKE,IAC3B,CACH,MAAOA,EACP,KAAM,IAAIA,EAAW,KAAK,MAAM,KAAK,GAAG,yCAAyCA,EAAW,OAAO,EAAE,CAAC,EAAA,EAE7G,CAAA,CACL,EAGJ,QAAS,CACL,qBAAsB,CAClB,KAAK,oBAAsB,EAAA,EAG/B,sBAAuB,CACnB,KAAK,oBAAsB,EAAA,EAG/B,oBAAoBC,EAAgB,CAChC,KAAK,MAAM,sBAAuBA,CAAK,CAAA,EAG3C,oBAAoBA,EAAgB,CAChC,KAAK,MAAM,sBAAuBA,CAAK,CAAA,EAG3C,cAAcD,EAA0C,CAC/CA,IACDA,EAAa,KAAK,SAAS,YAAY,CAAC,GAE5C,KAAK,WAAaA,EAClB,KAAK,oBAAoBA,EAAW,iBAAmB,IAAI,EAC3D,KAAK,MAAM,iBAAkBA,EAAW,OAAO,CAAA,CACnD,CAER,CAAC"}